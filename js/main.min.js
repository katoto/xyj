"use strict";function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}window.refreshPersonInfo=null,window.refreshInfo=null,window.refreshTime=null,window.js_currTime=0,window.onload=function(){function showLoading(){$(".buy-loading").show(),$("html body").addClass("stop")}function hideLoading(){$(".buy-loading").hide(),$("html body").removeClass("stop")}function numberComma(source){var length=1<arguments.length&&void 0!==arguments[1]?arguments[1]:3;return(source=String(source).split("."))[0]=source[0].replace(new RegExp("(\\d)(?=(\\d{"+length+"})+$)","ig"),"$1,"),source.join(".")}function formatUSDT(eth){return numberComma(accMul(472,eth).toFixed(2))}function closeVanity(){$("#vanity").removeClass("show")}function updateInterval(time){xyj._timer&&clearInterval(xyj._timer),xyj._time=time,xyj._timer=setInterval(function(){var time,hour,timeTime=(time=xyj._time,[hour=Math.floor(time/3600),Math.floor((time-3600*hour)/60),(time-3600*hour)%60]);!function(hour,min,second){function formatTime(time){return parseInt(time,10)<10?"0"+time.toString():time}if(hour<0)return $(".headtimer").text(_("想开启新的轮回吗？")),$("header .lottery_time, .lottery_time p").text(_("本回合已结束")),$(".js_buy").addClass("isOver"),$(".js_buy .js_buy_text").text(_("现在购买1颗金钻，您将激活新一回合的游戏！")),clearInterval(xyj._timer),xyj._timer=null;$(".js_buy").removeClass("isOver"),$(".js_buy .js_buy_text").text(_("快速购买一颗金钻，赢得超级奖池！")),$(".headtimer, header .lottery_time").text(formatTime(hour)+":"+formatTime(min)+":"+formatTime(second)),$(".lottery_time p").text(formatTime(hour)+_(":")+formatTime(min)+_(":")+formatTime(second))}(timeTime[0],timeTime[1],timeTime[2]),xyj._time--},1500)}function accMul(arg1,arg2){var m=0,s1=arg1.toString(),s2=arg2.toString();try{m+=s1.split(".")[1].length}catch(e){}try{m+=s2.split(".")[1].length}catch(e){}return Number(s1.replace(".",""))*Number(s2.replace(".",""))/Math.pow(10,m)}function accDiv(arg1,arg2){var t1=0,t2=0;try{t1=arg1.toString().split(".")[1].length}catch(e){}try{t2=arg2.toString().split(".")[1].length}catch(e){}return Number(arg1.toString().replace(".",""))/Number(arg2.toString().replace(".",""))*Math.pow(10,t2-t1)}function formatNum6(num){return accDiv(Math.floor(accMul(Number(num),Math.pow(10,6))),Math.pow(10,6))}function formatNum4(num){return accDiv(Math.floor(accMul(Number(num),Math.pow(10,4))),Math.pow(10,4))}function formatNum3(num){return accDiv(Math.floor(accMul(Number(num),Math.pow(10,3))),Math.pow(10,3))}function formatNum2(num){return accDiv(Math.floor(accMul(Number(num),Math.pow(10,2))),Math.pow(10,2))}function renderPrice(){var num,price=xyj._keyPrice;num=price,price=accDiv(Math.floor(accMul(Number(num),Math.pow(10,8))),Math.pow(10,8)),$("#ethCount").text("@ "+accMul(xyj._keyNums,price).toString()+" ETH")}function getBuyPrice(fn){xyj.getBuyPrice(function(error,price){error?console.log(error):(xyj._keyPrice=price,fn&&fn(),renderPrice())})}function getAccounts(fn){xyj.getAccounts(function(error,account){xyj._account=account,error||""===account?(console.log(error),alertify.error(_("请先登陆您的Metamask钱包"))):(console.log(account),fn(account))})}function getAdviceHash(){var type,str=window.location.pathname.slice(1);return""===str?(type="addr",str="0xfd76dB2AF819978d43e07737771c8D9E8bd8cbbF"):32<str.length?type="addr":isNaN(Number(str))?type="name":(type="id",str=Number(str)),_defineProperty({type:type,str:str},"str",str)}$("#jumpToContact").click(function(){window.location.href="https://etherscan.io/address/"+contractAddr+"#code"}),$("#jumpToEdu").click(function(){"zh"===global_lan?window.location.href="../edu_zh.pdf":window.location.href="../edu_cn.pdf"}),$(".team-grid .tabs .tab-title span").click(function(){$(".team-grid .tabs .tab-title span").removeClass("active"),$(this).addClass("active"),$(".team-grid .tabs .tab-content").removeClass("active"),$(".team-grid .tabs .tab-content").eq($(this).index()).addClass("active")}),$(".list-content .tabs .tab-title span").click(function(){$(".list-content .tabs .tab-title span").removeClass("active"),$(this).addClass("active"),$(".list-content .tabs .tab-content").removeClass("active"),$(".list-content .tabs .tab-content").eq($(this).index()).addClass("active")}),this.setInterval(function(){window.refreshTime()},1e4),window.formatNum6=formatNum6,xyj._keyNums=1,window.refreshTime=function(){xyj.getTimeLeft(function(error,time){error?console.log(error):(console.log(time),time.toString()===js_currTime.toString()&&"0"!==time.toString()||updateInterval(0===(js_currTime=time)?-1:time))})},window.refreshTime(),$("#count").on("input",function(){var keyNums=Number($(this).val());0===keyNums||isNaN(keyNums)?xyj._keyNums=1:xyj._keyNums=keyNums,renderPrice()}),$("#count").keyup(function(){var keyNums=Number($(this).val());0===keyNums||isNaN(keyNums)?xyj._keyNums=1:xyj._keyNums=keyNums,renderPrice()}),$(".count-container").on("click",".count-wrapper",function(){var keyNums=Number($(this).attr("data-num"));0===keyNums||isNaN(keyNums)||(xyj._keyNums=xyj._keyNums+parseInt(keyNums,10),$("#count").val(xyj._keyNums),renderPrice())}),getBuyPrice(),xyj._keyPriceTimer=setInterval(function(){getBuyPrice()},1e4),$(".team-container").on("click",".team-wrapper",function(){$(".team-wrapper").removeClass("team-wrapper--checked"),$(this).addClass("team-wrapper--checked");var teamId={shifu:0,wukong:2,bajie:3,shaseng:1}[$(this).attr("data-team")];xyj._team=teamId}),xyj._team=2,window.refreshPersonInfo=function(){getAccounts(function(account){xyj.getPlayerInfoByAddress(account,function(error,data){$(".js_noid, .js_hasid").addClass("hide"),error||(console.log(data),data&&""!==data.inviteName?($(".js_hasid").removeClass("hide"),$("#mylink").text("http://xyj/"+account),$("#idlink").text("http://xyj/"+("0"===data.id?"":data.id)),$("#namelink").text("http://xyj/"+data.inviteName),xyj._inviteName=data.inviteName):$(".js_noid").removeClass("hide"),$(".list-content .share-award").text(data.shareEarn.toString()+" ETH"),$(".team-grid .share-award").text(data.shareEarn.toString()),$(".list-content .owner-keys").text(data.keys.toString()+_(" 个")),getBuyPrice(function(){$(".team-grid .js_your_key").text(Number(data.keys))}),$(".list-content .total-award").text(formatNum6(data.totalEarn).toString()+" ETH"),$(".round-list .total-award-usdt").text("= "+formatUSDT(data.totalEarn)),$(".team-grid .total-award-usdt").text("≙ "+formatUSDT(data.totalEarn)+" USDT"),$(".team-grid .total-award").text(formatNum6(data.totalEarn).toString()))})})},window.refreshPersonInfo(),$(".btn-buy, .js_buy").click(function(){var num=Number($("#count").val()),isJSBuy=$(this).hasClass("js_buy");isNaN(num)||0===parseInt($("#count").val(),10)||num!==parseInt(num,10)||num<0?alertify.alert("请输入正确的金钻数量"):getAccounts(function(account){if(account){showLoading();var data=getAdviceHash();(0,{id:xyj.buyXid,addr:xyj.buyXaddr,name:xyj.buyXname}[data.type])(data.str,Number(xyj._team),accMul(xyj._keyPrice,isJSBuy?1:xyj._keyNums),function(error,data){hideLoading(),error?alertify.error(_("已取消购买金钻")):alertify.success(_("下单成功"))})}})}),window.refreshInfo=function(){xyj.getCurrentRoundInfo(function(error,data){error||(console.log(data),getBuyPrice(function(){console.log(data),$(".banner .msg3, .total_prize_pool").text(formatNum4(data.currPot).toString()),$(".list-content .js_wukong").text(formatNum4(data.sneks_2).toString()),$(".list-content .js_shifu").text(formatNum4(data.whales_0).toString()),$(".list-content .js_bajie").text(formatNum4(data.bulls_3).toString()),$(".list-content .js_shaseng").text(formatNum4(data.bears_1).toString()),$(".total-usdt").text("= "+formatUSDT(data.currPot)+" USDT"),console.log(data.purchasedTime,formatNum2(data.purchasedTime)),$(".js_year").text(1<data.purchasedTime?formatNum2(data.purchasedTime).toString():formatNum4(data.purchasedTime).toString()),$(".js_second").text(numberComma(data.purchasedSeconds)),$(".js_round").text("#"+data.roundNum)}))})},window.refreshInfo(),xyj.getRound(function(error,data){error||(console.log(data),$(".js_keys_value").text(formatNum3(data.totalEth)),$(".js_keys_usdt").text("≙ "+formatUSDT(data.totalEth)),$(".js_dis_value").text(formatNum3(data.distributionEth)),$(".js_dis_usdt").text("≙ "+formatUSDT(data.distributionEth)))}),$(".js_buyceo").click(function(){xyj._account&&""!==xyj._account?($("#vanity").addClass("show"),$("#nameInput").val("")):alertify.error(_("请先登陆您的Metamask钱包"))}),$("#vanity .col-auto").click(closeVanity),$("#namePurchase").click(function(){getAccounts(function(account){if(account){var data=getAdviceHash(),name=$.trim($("#nameInput").val());if(function(name){return name.length<=32&&/^[a-z0-9\-\s]+$/.test(name)&&!/^[0-9]+$/.test(name)&&-1===name.indexOf("  ")}(name))showLoading(),(0,{id:xyj.registerNameXID,addr:xyj.registerNameXaddr,name:xyj.registerNameXname}[data.type])(name,data.str,function(error){hideLoading(),error?alertify.error(_("已取消注册推广代号")):(closeVanity(),alertify.success(_("下单成功")))});else alertify.alert(_("输入的推广代号不符合规则"))}})}),$("#randomName").click(function(){var getRandomKey,nouns,adjectives;$("#nameInput").val((adjectives=["adamant","adroit","amatory","animistic","antic","arcadian","baleful","bellicose","bilious","boorish","calamitous","caustic","cerulean","comely","concomitant","contumacious","corpulent","crapulous","defamatory","didactic","dilatory","dowdy","efficacious","effulgent","egregious","endemic","equanimous","execrable","fastidious","feckless","fecund","friable","fulsome","garrulous","guileless","gustatory","harjd","heuristic","histrionic","hubristic","incendiary","insidious","insolent","intransigent","inveterate","invidious","irksome","jejune","jocular","judicious","lachrymose","limpid","loquacious","luminous","mannered","mendacious","meretricious","minatory","mordant","munificent","nefarious","noxious","obtuse","parsimonious","pendulous","pernicious","pervasive","petulant","platitudinous","precipitate","propitious","puckish","querulous","quiescent","rebarbative","recalcitant","redolent","rhadamanthine","risible","ruminative","sagacious","salubrious","sartorial","sclerotic","serpentine","spasmodic","strident","taciturn","tenacious","tremulous","trenchant","turbulent","turgid","ubiquitous","uxorious","verdant","voluble","voracious","wheedling","withering","zealous"],(nouns=["ninja","truce","harj","finney","szabo","gwei","laser","justo","satoshi","mantso","3D","inventor","theShocker","aritz","sumpunk","cryptoknight","randazz","kadaz","daok","shenron","notreally","thecrypt","stick figures","mermaid eggs","sea barnacles","dragons","jellybeans","snakes","dolls","bushes","cookies","apples","ice cream","ukulele","kazoo","banjo","opera singer","circus","trampoline","carousel","carnival","locomotive","hot air balloon","praying mantis","animator","artisan","artist","colorist","inker","coppersmith","director","designer","flatter","stylist","leadman","limner","make-up artist","model","musician","penciller","producer","scenographer","set decorator","silversmith","teacher","auto mechanic","beader","bobbin boy","clerk of the chapel","filling station attendant","foreman","maintenance engineering","mechanic","miller","moldmaker","panel beater","patternmaker","plant operator","plumber","sawfiler","shop foreman","soaper","stationary engineer","wheelwright","woodworkers"])[(getRandomKey=function(list){return Math.floor(Math.random()*list.length)})(nouns)]+" "+adjectives[getRandomKey(adjectives)]))}),$(".js_withdraw").click(function(){xyj._account&&""!==xyj._account?(showLoading(),xyj.withdraw(function(error,res){error?alertify.error(_("提现已取消")):alertify.success(_("下单成功")),hideLoading(),console.log("提现",error,res)})):alertify.error(_("请先登陆您的Metamask钱包"))}),$(".js_share").click(function(){$("#sharing-rewards span").eq(2).click(),xyj._account&&""!==xyj._account||alertify.error(_("请先登陆您的Metamask钱包"))}),new ClipboardJS(".js_copy_btn")};